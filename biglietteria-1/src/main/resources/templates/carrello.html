<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrello</title>
<style>
    
    .current{
        text-decoration: underline !important;
        color: black;
        
    }
    
</style>
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />
</head>
<body>
   
    <header>
        <nav class="navbar navbar-expand-sm bg-light">
          <div class="container">
            <ul class="navbar-nav ">
              <a class="nav-link ms-auto" href="../index.html">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="50"
                  height="50"
                  fill="currentColor"
                  class="bi bi-ticket-perforated"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M4 4.85v.9h1v-.9zm7 0v.9h1v-.9zm-7 1.8v.9h1v-.9zm7 0v.9h1v-.9zm-7 1.8v.9h1v-.9zm7 0v.9h1v-.9zm-7 1.8v.9h1v-.9zm7 0v.9h1v-.9z"
                  />
                  <path
                    d="M1.5 3A1.5 1.5 0 0 0 0 4.5V6a.5.5 0 0 0 .5.5 1.5 1.5 0 1 1 0 3 .5.5 0 0 0-.5.5v1.5A1.5 1.5 0 0 0 1.5 13h13a1.5 1.5 0 0 0 1.5-1.5V10a.5.5 0 0 0-.5-.5 1.5 1.5 0 0 1 0-3A.5.5 0 0 0 16 6V4.5A1.5 1.5 0 0 0 14.5 3zM1 4.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v1.05a2.5 2.5 0 0 0 0 4.9v1.05a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-1.05a2.5 2.5 0 0 0 0-4.9z"
                  />
                </svg>
                TicketEZ
              </a>
            </ul>
  
          
<div class="d-flex justify-content-end">
    
                    <a class="nav-link me-5" href="spettacolo"
                    >Spettacoli </a>
    
    
    
    
    
    
    
    
                  <a class="nav-link active current" aria-current="page" href="#"
                    >Carrello
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-cart"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"
                      /></svg
                  ></a>
    
</div>
            </div>
          </div>
        </nav>
      </header>
  


<div class="mx-auto mt-5" style="width: 80vh; height: fit-content;">
    
          <table class="table table-striped">
    
            <thead>
                <tr>
                  
                  <th scope="col">Titolo</th>                  
                  <th scope="col">Regista</th>
                  <th scope="col">Costo</th>
                  <th scope="col">Azione</th>
                </tr>
              </thead>
              <tbody id="bodytabella">
                
              </tbody>
    
          </table>


          <div>

            <button id="submit" class="btn btn-primary"> Compra</button>



          </div>
    
</div>




      <script>

        window.addEventListener("DOMContentLoaded", ()=>{
            let spett=[];
            if(this.localStorage!=0){
                let spettacoli=JSON.parse(this.localStorage.getItem("etichetta"));
                console.log(spettacoli);
                spett=spettacoli;
            }

            let bodytabella=document.querySelector("#bodytabella");

            spett.forEach((spettacolo)=>{
                let tr=document.createElement("tr");
                let td=document.createElement("td");
                let td1=document.createElement("td");
                let td2=document.createElement("td");
                let td3=document.createElement("td");
                let td4=document.createElement("td");
                
                td.setAttribute("scope", "col");
                td1.setAttribute("scope", "col");
                td2.setAttribute("scope", "col");
                td3.setAttribute("scope", "col");
                td4.setAttribute("scope", "col");

                let btn=document.createElement("button");
                btn.setAttribute("class", "btn btn-danger");
                btn.innerHTML="Cancella";

                td.textContent=`${spettacolo.titolo}`
                td1.textContent=`${spettacolo.attori}`
                td2.textContent=`${spettacolo.regista}`
                td3.textContent=`${spettacolo.regista}`

                td3.appendChild(btn);
                tr.append(td,td1,td2,td3);
                bodytabella.append(tr);


                btn.addEventListener("click", function(){
                    spett.splice(spett.indexOf(spettacolo),1);
                    localStorage.setItem("etichetta",JSON.stringify(spett));
                    console.log(spett);
                    location.reload;
                    tr.remove();
                })
                


            })


            btnSubmit.addEventListener("click", function(){
                const PRENOTAZIONE="http://localhost:9020/api/biglietti"




                fetch(PRENOTAZIONE, {
                    method:"POST",
                    headers:{"Content-Type":"application/json"},
                    body: JSON.stringify(creaPrenotazione())
                })
                console.log("sono in fetch")

            })


            function creaPrenotazione(){
               let prenotazione=[]
               let nomeUtente=JSON.localStorage.getItem("userConnesso");
            }
            
            class Prenotazione{
                constructor(id, nomeUtente, data, replica, posti)
                {
                    this.id=id;
                    this.nomeUtente=nomeUtente;
                    this.data=data;
                    this.replica=replica;
                    this.posti=posti
                }
            }

        })

        let btnSubmit=document.querySelector("#submit")

        



      </script>









    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>


</body>
</html>